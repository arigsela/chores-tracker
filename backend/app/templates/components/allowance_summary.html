<div class="overflow-x-auto">
    <table class="min-w-full bg-white">
        <thead class="bg-gray-100">
            <tr>
                <th class="py-2 px-4 text-left">Child</th>
                <th class="py-2 px-4 text-left">Completed Chores</th>
                <th class="py-2 px-4 text-left">Total Earned</th>
                <th class="py-2 px-4 text-left">Adjustments</th>
                <th class="py-2 px-4 text-left">Paid Out</th>
                <th class="py-2 px-4 text-left">Balance Due</th>
                <th class="py-2 px-4 text-left">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for child in children %}
            <tr class="border-t">
                <td class="py-2 px-4">{{ child.username }}</td>
                <td class="py-2 px-4">{{ child.completed_chores }}</td>
                <td class="py-2 px-4">${{ child.total_earned }}</td>
                <td class="py-2 px-4">${{ child.adjustments|default('0.00') }}</td>
                <td class="py-2 px-4">${{ child.paid_out }}</td>
                <td class="py-2 px-4 font-semibold">${{ child.balance_due }}</td>
                <td class="py-2 px-4 space-y-2 md:space-y-0 md:space-x-2 flex flex-col md:flex-row">
                    <button 
                        class="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600"
                        hx-post="/api/v1/payments/record"
                        hx-vals='{"child_id": {{ child.id }}, "amount": {{ child.balance_due }}, "description": "Allowance payment"}'
                        hx-target="#allowance-summary"
                        hx-swap="innerHTML"
                    >
                        Record Payment
                    </button>
                    <button 
                        class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600"
                        hx-get="/api/v1/html/payments/adjust-form/{{ child.id }}"
                        hx-target="#adjustment-form-container"
                        hx-swap="innerHTML"
                    >
                        Adjust
                    </button>
                    <button 
                        class="bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600"
                        hx-get="/api/v1/html/payments/history/{{ child.id }}"
                        hx-target="#payment-history-container"
                        hx-swap="innerHTML"
                    >
                        History
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Container for the adjustment form -->
<div id="adjustment-form-container" class="mt-4"></div>

<!-- Container for payment history -->
<div id="payment-history-container" class="mt-4"></div>